// ********************************************************************************************************************
import { Array2 } from "../../types/array2";
import { Vector2 } from "../../types/vector2";
import { TerrainCell } from "./terrain-cell";
// ********************************************************************************************************************
export class TerrainCellGrid extends Array2<TerrainCell> {

    // ****************************************************************************************************************
    // constructor
    // ****************************************************************************************************************
    constructor(sizeX: number, sizeY: number) {

        super(sizeX, sizeY);

        for (var x = 0; x < this.sizeX; x++) {

            for (var y = 0; y < this.sizeY; y++) {

                this.array[x][y] = new TerrainCell(0);
            }
        }
    }

    // ****************************************************************************************************************
    // function:    clone
    // ****************************************************************************************************************
    // parameters:  n/a
    // ****************************************************************************************************************
    // returns:     the clone
    // ****************************************************************************************************************
    public clone(): TerrainCellGrid {

        const clone = new TerrainCellGrid(this.sizeX, this.sizeY);

        clone.copy(this);

        return clone;
    }

    // ****************************************************************************************************************
    // function:    getGradient
    // ****************************************************************************************************************
    // parameters:  x - the x
    // ****************************************************************************************************************
    //              y - the y
    // ****************************************************************************************************************
    // returns:     the gradient
    // ****************************************************************************************************************
    public getGradient(x: number, y: number): Vector2 {

        // ************************************************************************************************************
        // obtain cells
        // ************************************************************************************************************

        const cellN = this.get(x, y - 1);

        const cellE = this.get(x + 1, y);

        const cellS = this.get(x, y + 1);

        const cellW = this.get(x - 1, y);

        // ************************************************************************************************************
        // obtain heights
        // ************************************************************************************************************

        var gx = (cellE.height - cellW.height);

        var gy = (cellS.height - cellN.height);

        return new Vector2(gx, gy);
    }
}
