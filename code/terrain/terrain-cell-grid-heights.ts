// ********************************************************************************************************************
import { clampZeroOne } from "../helpers/math.helper";
// ********************************************************************************************************************
import { TerrainCellGrid } from "./terrain-cell-grid";
// ********************************************************************************************************************
import { TerrainHeights } from "./terrain-heights";
// ********************************************************************************************************************
export class TerrainCellGridHeights extends TerrainHeights {

    // ****************************************************************************************************************
    // offsetX - the offset x
    // ****************************************************************************************************************
    private readonly offsetX: number = 0;

    // ****************************************************************************************************************
    // offsetY - the offset y
    // ****************************************************************************************************************
    private readonly offsetY: number = 0;

    // ****************************************************************************************************************
    // constructor
    // ****************************************************************************************************************
    constructor(private readonly grid: TerrainCellGrid) {

        super(0, 0, 0);

        this.offsetX = grid.sizeX / 2;

        this.offsetY = grid.sizeY / 2;
    }

    // ****************************************************************************************************************
    // function:    getHeight
    // ****************************************************************************************************************
    // parameters:  x - the x
    // ****************************************************************************************************************
    //              y - the y
    // ****************************************************************************************************************
    // returns:     the height
    // ****************************************************************************************************************
    public getHeight(x: number, y: number): number {

        const cell = this.grid.get(x + this.offsetX, y + this.offsetY);

        return clampZeroOne(cell?.height ?? 0);
    }
}
